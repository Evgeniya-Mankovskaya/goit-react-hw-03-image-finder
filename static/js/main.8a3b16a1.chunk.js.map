{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Container/Container.module.css","components/Searchbar/Searchbar.js","services/api.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Container/Container.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","SearchBar","state","searchQuery","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","className","s","searchbar","this","searchForm","type","button","buttonLabel","onChange","input","autoComplete","autoFocus","placeholder","Component","ImageApi","page","url","fetch","ImageGalleryItem","src","alt","onClick","id","imageGalleryItem","imageGalleryItemImage","Button","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackDropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","handleBackdropClick","modal","tags","ImageGallery","gallery","status","error","showModal","loadMore","ImageAPI","then","response","json","hits","addHits","images","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","toggleModal","onOpen","largeImageURL","prevProps","prevQuery","nextQuery","ok","Promise","reject","Error","length","arr","newImgArr","forEach","push","loader","color","height","width","imageGallery","map","Container","children","container","App","handleFormSubmit","Searchbar","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8a3b16a1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__hH0hu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__2o1ff\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__zlQDc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3-hNk\",\"modal\":\"Modal_modal__P0Y6H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1NqR-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__1CXmP\"};","import { Component } from \"react\";\r\nimport { GoSearch } from \"react-icons/go\";\r\nimport { toast } from \"react-toastify\";\r\nimport s from \"./Searchbar.module.css\";\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  handleQueryChange = (event) => {\r\n    this.setState({ searchQuery: event.currentTarget.value.toLowerCase() });\r\n  };\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (this.state.searchQuery.trim() === \"\") {\r\n      toast(\"Enter query in the search field.\");\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={s.searchForm}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.buttonLabel}>Search</span>\r\n            <GoSearch />\r\n          </button>\r\n\r\n          <input\r\n            value={this.state.searchQuery}\r\n            onChange={this.handleQueryChange}\r\n            className={s.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","export default function ImageApi(searchQuery, page) {\r\n  const API_KEY = \"24006610-770c029dafc5e505b4312f4f7\";\r\n  const BASE_URL = \"https://pixabay.com/api/\";\r\n  const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n  return fetch(url);\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ src, alt, onClick, id }) => {\r\n  return (\r\n    <li\r\n      className={s.imageGalleryItem}\r\n      onClick={() => {\r\n        onClick(src, alt, id);\r\n      }}\r\n    >\r\n      <img src={src} alt={alt} className={s.imageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n};\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Button.module.css\";\r\n\r\nfunction Button({ onClick }) {\r\n  return (\r\n    <button type=\"button\" className={s.button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackDropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.modal}>\r\n          <img src={this.props.src} alt={this.props.tags} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  src: PropTypes.string,\r\n  tags: PropTypes.string,\r\n};\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport s from \"./ImageGallery.module.css\";\r\nimport ImageAPI from \"../../services/api\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport Button from \"../Button/Button\";\r\nimport Modal from \"../Modal/Modal\";\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    gallery: [],\r\n    status: \"idle\",\r\n    error: null,\r\n    page: 1,\r\n    showModal: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevProps.searchQuery;\r\n    const nextQuery = this.props.searchQuery;\r\n\r\n    if (prevQuery !== nextQuery) {\r\n      this.setState({ status: \"pending\" });\r\n      ImageAPI(nextQuery)\r\n        .then((response) => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n          return Promise.reject(\r\n            new Error(`Nothing were found with ${nextQuery}`)\r\n          );\r\n        })\r\n        .then(({ hits }) => {\r\n          if (hits.length === 0) {\r\n            this.setState({ status: \"rejected\" });\r\n          } else {\r\n            const addHits = this.images(hits);\r\n            this.setState({\r\n              gallery: addHits,\r\n              status: \"resolved\",\r\n              page: this.state.page + 1,\r\n              searchQuery: nextQuery,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error, status: \"rejected\" });\r\n          toast(\"Someting went wrong\");\r\n        });\r\n    }\r\n  }\r\n\r\n  loadMore = () => {\r\n    const { searchQuery, page } = this.state;\r\n    ImageAPI(searchQuery, page)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then(({ hits }) => {\r\n        const addHits = this.images(hits);\r\n        this.setState((prevState) => ({\r\n          gallery: [...prevState.gallery, ...addHits],\r\n          page: page + 1,\r\n        }));\r\n      })\r\n\r\n      .then(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ error, status: \"rejected\" });\r\n        toast(\"Someting went wrong\");\r\n      });\r\n  };\r\n\r\n  images(arr) {\r\n    const newImgArr = [];\r\n    arr.forEach(({ id, largeImageURL, tags }) => {\r\n      newImgArr.push({ id, largeImageURL, tags });\r\n    });\r\n    return newImgArr;\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState((prevState) => ({ showModal: !prevState.showModal }));\r\n  };\r\n\r\n  onOpen = (src, alt) => {\r\n    this.setState({\r\n      largeImageURL: src,\r\n      alt: alt,\r\n    });\r\n    this.toggleModal();\r\n  };\r\n  onClose = () => {\r\n    this.setState({\r\n      largeImageURL: \"\",\r\n      alt: \"\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { gallery, status, largeImageURL, alt, showModal } = this.state;\r\n\r\n    if (status === \"idle\") {\r\n      return <div>Enter search query</div>;\r\n    }\r\n\r\n    if (status === \"pending\") {\r\n      return (\r\n        <Loader\r\n          className={s.loader}\r\n          type=\"Hearts\"\r\n          color=\"#cea8d67a\"\r\n          height={80}\r\n          width={80}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (status === \"rejected\") {\r\n      return <div>Nothing were found</div>;\r\n    }\r\n\r\n    if (status === \"resolved\") {\r\n      return (\r\n        <div>\r\n          {showModal && (\r\n            <Modal onClose={this.toggleModal} src={largeImageURL} tags={alt} />\r\n          )}\r\n          <ul className={s.imageGallery}>\r\n            {gallery.map(({ largeImageURL, tags, id }) => {\r\n              return (\r\n                <ImageGalleryItem\r\n                  key={id}\r\n                  src={largeImageURL}\r\n                  alt={tags}\r\n                  onClick={this.onOpen}\r\n                />\r\n              );\r\n            })}\r\n          </ul>\r\n\r\n          <Button onClick={this.loadMore} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import s from \"./Container.module.css\";\r\nfunction Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n\r\nexport default Container;\r\n","import React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport \"./App.css\";\nimport Container from \"./components/Container/Container\";\n\n// Your API key: 24006610-770c029dafc5e505b4312f4f7\n//\nclass App extends Component {\n  state = {\n    searchQuery: \"\",\n  };\n  handleFormSubmit = (searchQuery) => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <>\n        <Container>\n          <Searchbar onSubmit={this.handleFormSubmit} />\n        </Container>\n        <Container>\n          <ImageGallery searchQuery={searchQuery} />\n        </Container>\n        <ToastContainer position=\"top-center\" />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3QhOA\",\"searchForm\":\"Searchbar_searchForm__3NovK\",\"button\":\"Searchbar_button__3tYtF\",\"buttonLabel\":\"Searchbar_buttonLabel__1l0Bx\",\"input\":\"Searchbar_input__2WPy7\"};"],"sourceRoot":""}